# AWS Route 53 Information Export Tool

This professional bash script exports comprehensive Route 53 hosted zone information to CSV format with timestamp.

## Features

- ✅ Exports all Route 53 hosted zones information
- ✅ Includes Hosted Zone Name, Type, Created By, Record Count, Description, and Hosted Zone ID
- ✅ Outputs to timestamped CSV file
- ✅ Professional error handling and logging
- ✅ Colored output for better readability
- ✅ Automatic directory creation
- ✅ AWS CLI validation and permission checks
- ✅ Default region support (ap-southeast-2)

## Prerequisites

1. **AWS CLI** - Must be installed and configured
2. **Bash shell** - Compatible with Linux/macOS/WSL
3. **AWS Permissions** - The following IAM permissions are required:
   ```json
   {
     "Version": "2012-10-17",
     "Statement": [
       {
         "Effect": "Allow",
         "Action": [
           "route53:ListHostedZones",
           "route53:GetHostedZone",
           "route53:ListResourceRecordSets"
         ],
         "Resource": "*"
       }
     ]
   }
   ```

## Installation

1. Make the script executable:
   ```bash
   chmod +x export_route53_info.sh
   ```

## Usage

### Basic Usage
```bash
./export_route53_info.sh
```

The script will:
1. Validate AWS CLI configuration
2. Create `route53_exports` directory if it doesn't exist
3. Export all Route 53 hosted zones to a CSV file
4. Display a summary of the export operation

### Output

The script creates a CSV file with the following format:
```
route53_exports/route53_hosted_zones_YYYYMMDD_HHMMSS.csv
```

### CSV Structure

| Column | Description |
|--------|-------------|
| Hosted Zone Name | The domain name of the hosted zone |
| Type | Public or Private |
| Created By | Caller reference (who created the zone) |
| Record Count | Number of DNS records in the zone |
| Description | Zone description (if available) |
| Hosted Zone ID | Unique identifier for the hosted zone |
| Export Date | Timestamp when the export was performed |

## Example Output

```
Hosted Zone Name,Type,Created By,Record Count,Description,Hosted Zone ID,Export Date
example.com.,Public,terraform-20240101-123456,5,Production domain,Z123456789ABCDEF,2025-07-01 10:30:15
internal.local.,Private,console-20240201-654321,3,Internal DNS zone,Z987654321FEDCBA,2025-07-01 10:30:16
```

## Configuration

### Default Region
The script uses `ap-southeast-2` as the default region. To change this, modify the following line in the script:
```bash
export AWS_DEFAULT_REGION="ap-southeast-2"
```

Or set it as an environment variable:
```bash
export AWS_DEFAULT_REGION="us-east-1"
./export_route53_info.sh
```

## Error Handling

The script includes comprehensive error handling for:
- AWS CLI installation and configuration
- Invalid AWS credentials
- Insufficient permissions
- Network connectivity issues
- File system permissions

## Troubleshooting

### Common Issues

1. **AWS CLI not found**
   ```
   Solution: Install AWS CLI and ensure it's in your PATH
   ```

2. **AWS credentials not configured**
   ```
   Solution: Run 'aws configure' to set up your credentials
   ```

3. **Insufficient permissions**
   ```
   Solution: Ensure your AWS user/role has the required Route 53 permissions
   ```

4. **No hosted zones found**
   ```
   Solution: Verify you're using the correct AWS account and region
   ```

## Security Best Practices

1. **Least Privilege**: Only grant necessary Route 53 permissions
2. **Credential Security**: Use IAM roles instead of long-term access keys when possible
3. **Output Security**: Protect the generated CSV files as they contain infrastructure information
4. **Audit Logging**: Enable CloudTrail to log Route 53 API calls

## Script Features

### Professional Features
- Colored output for better user experience
- Progress indicators during processing
- Comprehensive error messages
- Automatic cleanup of CSV data
- Timestamp-based file naming
- Directory auto-creation

### Data Validation
- Escapes special characters in CSV output
- Handles missing or null values
- Validates AWS CLI configuration
- Checks file permissions

## License

This script is provided as-is for educational and professional use.

## Support

For issues or improvements, please review the error messages and logs generated by the script.
